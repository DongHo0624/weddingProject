<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="hall">
  	<select id="pageSelectAllList" parameterType="map" resultType="hall">
		select hall_no as hallNo,
			   member_id as memberId,
			   code as code,
			   hall_type as hallType,
			   hall_name as hallName,
			   hall_loc as hallLoc,
			   hall_addr as hallAddr,
			   hall_content as hallContent,
			   hall_img as hallImg,
			   hall_path as hallPath,
			   hall_price as hallPrice,
			   hall_min_person as hallMinPerson,
			   hall_max_person as hallMaxPerson,
			   hall_scope as hallScope,
			   hall_foodtype as hallFoodetype,
			   hall_foodMenu as hallFoodmenu,
			   hall_foodprice as hallFoodprice,
			   hall_tel as hallTel,
			   hall_time as hallTime,
			   hall_service_food as hallServiceFood,
			   hall_service_drink as hallServiceDrink,
			   hall_service_parking as hallServiceParking,
			   status as status,
			   viewstatus as viewStatus,
			   hall_tag as hallTag,
			   hall_latitude as hallLatitude,
			   hall_longitude as hallLongitude,
			   hall_date as hallDate
			   from (select rownum as rnum, d.* from (select * from hall where status=1 and viewstatus=0 order by hall_no) d) where (rnum between #{start} and #{end}) order by rnum desc
	</select>
	
	<select id="selectAllList"  resultType="_int">
	select count(*) from hall
	</select>
	
	<select id="searchList"  resultType="_int">
	select count(*) from hall
		<trim prefix="where" prefixOverrides="AND | OR">
			   		<if test="h.hallLoc != null">
			   			hall_Loc like '%'||#{halLoc}||'%'
			   		</if>
			   		<if test="h.hallType != null">
			   			AND hall_Type like '%'||#{hallType}||'%'
			   		</if>
			   		<if test="hallFoodtype != null">
			   			AND hall_Foodtype like '%'||#{hallFoodtype}||'%'
			   		</if>
		
			   		<if test="hallName != null">
			   			AND hall_Name like '%'||#{hallName}||'%'
			   		</if>
		</trim>
	 </select>
	
	<select id="hallSearch" parameterType="map" resultType="hall">
		select hall_no as hallNo,
			   member_id as memberId,
			   code as code,
			   hall_type as hallType,
			   hall_name as hallName,
			   hall_loc as hallLoc,
			   hall_addr as hallAddr,
			   hall_content as hallContent,
			   hall_img as hallImg,
			   hall_path as hallPath,
			   hall_price as hallPrice,
			   hall_min_person as hallMinPerson,
			   hall_max_person as hallMaxPerson,
			   hall_scope as hallScope,
			   hall_foodtype as hallFoodetype,
			   hall_foodMenu as hallFoodmenu,
			   hall_foodprice as hallFoodprice,
			   hall_tel as hallTel,
			   hall_time as hallTime,
			   hall_service_food as hallServiceFood,
			   hall_service_drink as hallServiceDrink,
			   hall_service_parking as hallServiceParking,
			   status as status,
			   viewstatus as viewStatus,
			   hall_tag as hallTag,
			   hall_latitude as hallLatitude,
			   hall_longitude as hallLongitude,
			   hall_date as hallDate 
			   from (select rownum as rnum, d.* from (select * from hall where status=1 and viewstatus=0 order by hall_no) d)
			   <trim prefix="where" prefixOverrides="AND | OR">
			   		<if test="h.hallLoc != null">
			   			hall_Loc like '%'||#{h.halLoc}||'%'
			   		</if>
			   		<if test="h.hallType != null">
			   			AND hall_Type like '%'||#{h.hallType}||'%'
			   		</if>
			   		<if test="h.hallFoodtype != null">
			   			AND hall_Foodtype like '%'||#{h.hallFoodtype}||'%'
			   		</if>
		
			   		<if test="h.hallName != null">
			   			AND hall_Name like '%'||#{h.hallName}||'%'
			   		</if>
			   	</trim>
			   	AND (rnum between #{start} and #{end}) order by rnum desc
	</select>
</mapper>
